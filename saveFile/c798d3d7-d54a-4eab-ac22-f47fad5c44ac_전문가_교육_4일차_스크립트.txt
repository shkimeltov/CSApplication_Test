=================================================================================================================
ğŸ”¶ğŸ”¸ê°œë°œí™˜ê²½ğŸ”¸ğŸ”¶			pp.20 ~ 36
=================================================================================================================
[VMware Player ì„¤ì¹˜]
https://www.vmware.com/kr/products/workstation-player/workstation-player-evaluation.html
ì—¬ê¸°ì—ì„œ 17.0. ë²„ì „ì„ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜í•¨

[ubuntu 22.04 ì„¤ì¹˜]
https://releases.ubuntu.com/22.04/

[SSH Server ì„¤ì¹˜]
terminal =>
$ sudo apt install openssh-server
   
[IP í™•ì¸]
$ ip a

[mobaxterm ì„¤ì¹˜]
https://mobaxterm.mobatek.net/download-home-edition.html

[mobaxtermì ‘ì†]
=================================================================================================================
ğŸ”¶ğŸ”¸Minikube ë°°í¬ğŸ”¸ğŸ”¶			pp.38 ~ 49
=================================================================================================================
[ğŸ“ì‚¬ì „ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ ë° íˆ´ ì„¤ì¹˜]
$ sudo apt update
$ sudo apt upgrade
$ sudo apt install curl
$ sudo apt install vim
$ sudo apt install git

[ğŸ“Minikube ì„¤ì¹˜]
$ cd ~
$ wget https://github.com/kubernetes/minikube/releases/download/v1.23.0/minikube-linux-amd64
$ sudo cp minikube-linux-amd64 /usr/local/bin/minikube
$ sudo install minikube-linux-amd64 /usr/local/bin/minikube
$ minikube version

[ğŸ“kubectl ì„¤ì¹˜]
$ curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.22.1/bin/linux/amd64/kubectl
$ chmod +x ./kubectl
$ sudo mv ./kubectl /usr/local/bin/kubectl
$ kubectl version -o json  --client

[ğŸ“Kubic Project ì €ì¥ì†Œ ë“±ë¡]
$ curl -fsSL https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/xUbuntu_21.10/Release.key \
  | gpg --dearmor \
  | sudo tee /etc/apt/keyrings/devel_kubic_libcontainers_stable.gpg > /dev/null
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/devel_kubic_libcontainers_stable.gpg] \
    https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/xUbuntu_21.10/ /" \
  | sudo tee /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list > /dev/null

$ sudo apt-get update
$ sudo apt-get -y upgrade

[ğŸ“Podman ì„¤ì¹˜]
$ sudo apt-get -y install podman
$ sudo vim /etc/sudoers
ì˜ˆì‹œ) ubuntu ALL=(ALL) NOPASSWD: /usr/bin/podman
$ sudo -k -n podman version

=================================================================================================================
ğŸ”¶ğŸ”¸MSA Application ë°°í¬ğŸ”¸ğŸ”¶			pp.51 ~ 73 
=================================================================================================================

[ğŸ“Minikube ì‹¤í–‰]
$ minikube start --driver=podman --container-runtime=cri-o

[ğŸ“Minikube ë°°í¬ í™•ì¸]
$ kubectl get node
$ kubectl get pods -n kube-system

[ğŸ“ë°°í¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œ]
$ cd ~
$ git clone https://github.com/K-PaaS/edu-msa-file.git

[ğŸ“Minikube IP ì£¼ì†Œ ì¡°íšŒ]
$ minikube ip 

[ğŸ“redis-msa-ui.yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/redis-msa-ui.yaml
${REDIS_MSA_UI}ë¥¼ "30801"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–

apiVersion: v1
kind: Service
metadata:
  name: redis-msa-ui
  labels:
    app: redis
spec:
  ports:
  - nodePort: 30801
    port: 6379
    protocol: TCP
    targetPort: 6379
  selector:
    app: redis
  type: NodePort
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°


[ğŸ“ë ˆë””ìŠ¤ ë°°í¬]
$ cd ~/edu-msa-file/Kubernetes/
$ kubectl apply -f redis-msa-ui.yaml



[ğŸ“mysql-msa-board.yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/mysql-msa-board.yaml
${MYSQL_MSA_BOARD}ì„ "30501"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–

apiVersion: v1
kind: Service
metadata:
  name: mysql-msa-board
spec:
  type: NodePort
  ports:
  - port: 3306
    protocol: TCP
    targetPort: 3306
    nodePort: 30501
  selector:
    app: mysql-board
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°




[ğŸ“mysql-msa-comment.yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/mysql-msa-comment.yaml
${MYSQL_MSA_COMMENT}ì„ "30601"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
apiVersion: v1
kind: Service
metadata:
  name: mysql-msa-comment
spec:
  type: NodePort
  ports:
  - port: 3306
    protocol: TCP
    targetPort: 3306
    nodePort: 30601
  selector:
    app: mysql-comment
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°



[ğŸ“mysql-msa-user.yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/mysql-msa-user.yaml
${MYSQL_MSA_USER}ì„ "30701"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
apiVersion: v1
kind: Service
metadata:
  name: mysql-msa-user
spec:
  type: NodePort
  ports:
  - port: 3306
    protocol: TCP
    targetPort: 3306
    nodePort: 30701
  selector:
    app: mysql-user
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°


=================================================================================================================
ğŸ”¶ğŸ”¸MySql ë°°í¬ ë° DB êµ¬ì¶•ğŸ”¸ğŸ”¶			pp.62 ~ 73 
=================================================================================================================


[ğŸ“mysql ë°°í¬]
$ cd ~/edu-msa-file/Kubernetes/
$ kubectl apply -f mysql-msa-board.yaml -f mysql-msa-comment.yaml -f mysql-msa-user.yaml


[ğŸ“ë°°í¬ í™•ì¸]
$ kubectl get pods
#ì•„ë˜ íŒŒë“œ ì¡°íšŒ ë‚´ìš©ì€ êµìœ¡ìƒë§ˆë‹¤ ì´ë¦„ì´ ë‹¤ë¥´ë¯€ë¡œ ì˜ˆì‹œë¡œ ì°¸ê³  í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
NAME                                             READY   STATUS    RESTARTS   AGE
mysql-msa-board-85bb55fb4f-gpj9f         1/1      Running    0              3m4s
mysql-msa-comment-694d68d4ff-562wk   1/1      Running    0              3m4s
mysql-msa-user-6c5499bbb5-29skb         1/1      Running    0              3m4s
redis-msa-ui-7d95f7d758-nmb2z             1/1      Running    0              14m
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°


[ğŸ“Board DB ì ‘ì†]
# kubectl exec -it ${POD_NAME} -- /bin/bash  
#ì¡°íšŒí•œ íŒŒë“œì˜ ì´ë¦„ì„ ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
ì˜ˆì‹œ) $ kubectl exec -it mysql-msa-board-85bb55fb4f-gpj9f -- /bin/bash


[ğŸ“Board DB ë¡œê·¸ì¸]
# mysql -u root -p
Enter password: password

[ğŸ“Board DB ìƒì„± ë° í…Œì´ë¸” ìƒì„±]
mysql> CREATE DATABASE msa_board default CHARACTER SET UTF8;
mysql> USE msa_board;
mysql> CREATE TABLE `TB_BOARD` (
  `board_seq` int(11) NOT NULL AUTO_INCREMENT,
  `board_title` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `board_text` mediumtext COLLATE utf8_unicode_ci,
  `write_user_id` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `write_user_name` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `use_yn` varchar(1) COLLATE utf8_unicode_ci DEFAULT 'Y',
  `create_dt` datetime NOT NULL,
  `update_dt` datetime NOT NULL,
  PRIMARY KEY (`board_seq`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

> exit
# exit


[ğŸ“ë°°í¬ í™•ì¸]
$ kubectl get pods 
#ì•„ë˜ íŒŒë“œ ì¡°íšŒ ë‚´ìš©ì€ êµìœ¡ìƒë§ˆë‹¤ ì´ë¦„ì´ ë‹¤ë¥´ë¯€ë¡œ ì˜ˆì‹œë¡œ ì°¸ê³  í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
NAME                                             READY   STATUS    RESTARTS   AGE
mysql-msa-board-85bb55fb4f-gpj9f         1/1      Running    0              3m4s
mysql-msa-comment-694d68d4ff-562wk   1/1      Running    0              3m4s
mysql-msa-user-6c5499bbb5-29skb         1/1      Running    0              3m4s
redis-msa-ui-7d95f7d758-nmb2z             1/1      Running    0              14m
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°

[ğŸ“COMMENT DB ì ‘ì†]
# kubectl exec -it ${POD_NAME} -- /bin/bash  
#ì¡°íšŒí•œ íŒŒë“œì˜ ì´ë¦„ì„ ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
ì˜ˆì‹œ) $ kubectl exec -it mysql-msa-comment-694d68d4ff-562wk -- /bin/bash


[ğŸ“COMMENT DB ë¡œê·¸ì¸]
# mysql -u root -p
Enter password: password

[ğŸ“COMMENT DB ìƒì„± ë° í…Œì´ë¸” ìƒì„±]
mysql> CREATE DATABASE msa_comment default CHARACTER SET UTF8;
mysql> USE msa_comment;
mysql> CREATE TABLE `TB_COMMENT` (
  `comment_seq` int(11) NOT NULL AUTO_INCREMENT,
  `board_seq` int(11) NOT NULL,
  `comment` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `write_user_id` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `write_user_name` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `use_yn` varchar(1) COLLATE utf8_unicode_ci DEFAULT 'Y',
  `create_dt` datetime NOT NULL,
  `update_dt` datetime NOT NULL,
  PRIMARY KEY (`comment_seq`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

> exit
# exit


[ğŸ“ë°°í¬ í™•ì¸]
$ kubectl get pods 
#ì•„ë˜ íŒŒë“œ ì¡°íšŒ ë‚´ìš©ì€ êµìœ¡ìƒë§ˆë‹¤ ì´ë¦„ì´ ë‹¤ë¥´ë¯€ë¡œ ì˜ˆì‹œë¡œ ì°¸ê³  í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
NAME                                             READY   STATUS    RESTARTS   AGE
mysql-msa-board-85bb55fb4f-gpj9f         1/1      Running    0              3m4s
mysql-msa-comment-694d68d4ff-562wk   1/1      Running    0              3m4s
mysql-msa-user-6c5499bbb5-29skb         1/1      Running    0              3m4s
redis-msa-ui-7d95f7d758-nmb2z             1/1      Running    0              14m
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°

[ğŸ“USER DB ì ‘ì†]
# kubectl exec -it ${POD_NAME} -- /bin/bash  
#ì¡°íšŒí•œ íŒŒë“œì˜ ì´ë¦„ì„ ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
ì˜ˆì‹œ) $ kubectl exec -it mysql-msa-user-6c5499bbb5-29skb -- /bin/bash


[ğŸ“USER DB ë¡œê·¸ì¸]
# mysql -u root -p
Enter password: password

[ğŸ“USER DB ìƒì„± ë° í…Œì´ë¸” ìƒì„±]
mysql> CREATE DATABASE msa_user default CHARACTER SET UTF8;
mysql> USE msa_user;
mysql> CREATE TABLE `TB_USER` (
  `user_seq` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `user_passwd` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `user_name` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `use_yn` varchar(1) COLLATE utf8_unicode_ci DEFAULT 'Y',
  `create_dt` datetime NOT NULL,
  `update_dt` datetime NOT NULL,
  PRIMARY KEY (`user_seq`),
  UNIQUE KEY `id_key` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

> exit
# exit

[JDK8 ë‹¤ìš´ë¡œë“œ]
https://www.oracle.com/java/technologies/downloads/#java8-windows


=================================================================================================================
ğŸ”¶ğŸ”¸YAML íŒŒì¼ ìˆ˜ì •ğŸ”¸ğŸ”¶			pp.105 ~ 115
=================================================================================================================

[eGovFrameDev ë‹¤ìš´ë¡œë“œ]
https://www.egovframe.go.kr/home/ntt/nttRead.do?menuNo=41&bbsId=18&nttId=1707&leftsub=2

[íŒŒì¼ ë‹¤ìš´ë¡œë“œ]
https://github.com/K-PaaS?q=edu&type=all&language=&sort=

[ğŸ“ì´ë¯¸ì§€ ì €ì¥ì†Œ ë¡œê·¸ì¸]
$ podman login docker.io
Username: ì•„ì´ë”” ì…ë ¥
Password: íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥

[ğŸ“ì´ë¯¸ì§€ ë¹Œë“œ, íƒœê·¸, ì—…ë¡œë“œ]
$ cd ~/edu-msa-file/Docker/edu-msa-board/ 
$ podman build --tag edu-msa-board:latest .
$ podman tag edu-msa-board parkdoll/edu-msa-board
$ podman push parkdoll/edu-msa-board

$ cd ~/edu-msa-file/Docker/edu-msa-comment/ 
$ podman build --tag edu-msa-comment:latest .
$ podman tag edu-msa-comment parkdoll/edu-msa-comment
$ podman push parkdoll/edu-msa-comment

$ cd ~/edu-msa-file/Docker/edu-msa-ui/ 
$ podman build --tag edu-msa-ui:latest .
$ podman tag edu-msa-ui parkdoll/edu-msa-ui
$ podman push parkdoll/edu-msa-ui

$ cd ~/edu-msa-file/Docker/edu-msa-user/ 
$ podman build --tag edu-msa-user:latest .
$ podman tag edu-msa-user parkdoll/edu-msa-user
$ podman push parkdoll/edu-msa-user

$ cd ~/edu-msa-file/Docker/edu-msa-zuul/ 
$ podman build --tag edu-msa-zuul:latest .
$ podman tag edu-msa-zuul parkdoll/edu-msa-zuul
$ podman push parkdoll/edu-msa-zuul

[ğŸ“edu-msa-board yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/edu-msa-board.yaml
${DOCKER_HUB_ID}ì„ "ë„ì»¤í—ˆë¸Œê³„ì •"ë¡œ ì…ë ¥
${EDU_MSA_BOARD}ì„ "30201"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
...
spec:
      containers:
      - name: board-msa
        image: kpaas/edu-msa-board:latest
        imagePullPolicy: Always
...
---
apiVersion: v1
kind: Service
metadata:
  name: edu-msa-board
  labels:
    app: board-msa
spec:
  ports:
  - nodePort:
    port: 28082
    protocol: TCP
    targetPort: 28082
  selector:
    app: board-msa
  type: NodePort
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°



[ğŸ“edu-msa-comment yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/edu-msa-comment.yaml
${DOCKER_HUB_ID}ì„ "ë„ì»¤í—ˆë¸Œê³„ì •"ë¡œ ì…ë ¥
${EDU_MSA_COMMENT}ì„ "30301"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
...
spec:
      containers:
      - name: board-msa
        image: kpaas/edu-msa-board:latest
        imagePullPolicy: Always
...
---
apiVersion: v1
kind: Service
metadata:
  name: edu-msa-comment
  labels:
    app: comment-msa
spec:
  ports:
  - nodePort: 30301
    port: 28083
    protocol: TCP
    targetPort: 28083
  selector:
    app: comment-msa
  type: NodePort
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°



[ğŸ“edu-msa-ui yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/edu-msa-ui.yaml
${DOCKER_HUB_ID}ì„ "ë„ì»¤í—ˆë¸Œê³„ì •"ë¡œ ì…ë ¥
${EDU_MSA_UI}ì„ "30001"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
...
spec:
      containers:
      - name: board-msa
        image: kpaas/edu-msa-board:latest
        imagePullPolicy: Always
...
---
apiVersion: v1
kind: Service
metadata:
  name: edu-msa-ui
  labels:
    app: ui-msa
spec:
  ports:
  - nodePort: 30001
    port: 28080
    protocol: TCP
    targetPort: 28080
  selector:
    app: ui-msa
  type: NodePort
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°


[ğŸ“edu-msa-user yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/edu-msa-user.yaml
${DOCKER_HUB_ID}ì„ "ë„ì»¤í—ˆë¸Œê³„ì •"ë¡œ ì…ë ¥
${EDU_MSA_USER}ì„ "30401"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
...
spec:
      containers:
      - name: board-msa
        image: kpaas/edu-msa-board:latest
        imagePullPolicy: Always
...
---
apiVersion: v1
kind: Service
metadata:
  name: edu-msa-user
  labels:
    app: user-msa
spec:
  ports:
  - nodePort: 30401
    port: 28084
    protocol: TCP
    targetPort: 28084
  selector:
    app: user-msa
  type: NodePort
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°


[ğŸ“edu-msa-zuul yaml íŒŒì¼ ìˆ˜ì •]
$ vim ~/edu-msa-file/Kubernetes/edu-msa-zuul.yaml
${DOCKER_HUB_ID}ì„ "ë„ì»¤í—ˆë¸Œê³„ì •"ë¡œ ì…ë ¥
${NAMESPACE}ì„ "default"ë¡œ ì…ë ¥ (ì´ 3ì¤„)
${EDU_MSA_ZULL}ì„ "30101"ë¡œ ìˆ˜ì •
â–â–â–â–â–â–â–â–â–â–â–â–â–â– Example â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
...
spec:
      containers:
      - name: zuul-msa
        image: jinyung0101/edu-msa-zuul:latest
        imagePullPolicy: Always
        ports:
        - containerPort: 28081
        env:
        - name: BOARD_MSA_URL
          value: "edu-msa-board.default.svc.cluster.local:28082"
        - name: COMMENT_MSA_URL
          value: "edu-msa-comment.default.svc.cluster.local:28083"
        - name: USER_MSA_URL
          value: "edu-msa-user.default.svc.cluster.local:28084"
---
apiVersion: v1
kind: Service
metadata:
  name: edu-msa-zuul
  labels:
    app: zuul-msa
spec:
  ports:
  - nodePort: 30101
    port: 28081
    protocol: TCP
    targetPort: 28081
  selector:
    app: zuul-msa
  type: NodePort
ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°


[ğŸ“yaml íŒŒì¼ ë°°í¬]
$ cd ~/edu-msa-file/Kubernetes/
$ kubectl apply -f edu-msa-board.yaml -f edu-msa-comment.yaml -f edu-msa-ui.yaml -f edu-msa-user.yaml -f edu-msa-zuul.yaml

[ğŸ“Pod ë° Service ë°°í¬ í™•ì¸]
$ kubectl get pods
$ kubectl get service

=================================================================================================================
ğŸ”¶ğŸ”¸MSA Application í¬í„¸ ì ‘ì†ğŸ”¸ğŸ”¶			pp.116
=================================================================================================================
#VMware í™”ë©´ ì›¹ë¸Œë¼ìš°ì € í™”ë©´ì—ì„œ ì•„ë˜ ë§í¬ ì…ë ¥í•˜ì—¬ ì ‘ì†í•œë‹¤.
192.168.49.2:30001/user/login